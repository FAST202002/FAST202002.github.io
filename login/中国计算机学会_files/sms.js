!function(e,t,n){var s=!1,a=/^1[0-9]{10}$/,i=config.getWebPath(),o="countdown",c=59,r={setItem:function(e,t){var n=new Date;n.setTime(n.getTime()+6e4);var s=e+"="+encodeURIComponent(t)+"; path=/;expires="+n.toGMTString();document.cookie=s},getItem:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var s=t[n].split("=");if(s[0]==e)return decodeURIComponent(s[1])}return""}};function m(){}function l(){e(".l_empty").removeClass("l_price_submit2")}function u(){changeImgCode("verify-l-phone")}m.init=function(e){e},m.hasSeed=function(){return s},m.checkPhone=function(e){return wzUtils.isNotEmpty(e)?!!a.test(e)||(message.warn("手机号码格式有误！"),l(),!1):(message.warn("手机号码不能为空！"),l(),!1)},e("#send_sms").click(function(){f(e(this))});var d=r.getItem(o);function f(t){var n=e.trim(e(".l_input1").val());if(m.checkPhone(n)){e(".l_input1").val(n);var a=e.trim(e("#auth-code-p").val());if(wzUtils.isEmpty(a))message.warn("验证码不能为空");else{e("#auth-code-p").val(a);var o=i+"/api/sms/login_auth",c=g(t);e.post(o,{phone:n,imgCode:a}).done(function(n){"1"==n.code?n.data?(s=!0,message.alert("短信已发送！"),e(".l_empty").addClass("l_price_submit2")):(message.alert("短信发送失败！"),p(t,c)):("603"==n.code?(message.warn("图形验证码错误，请重新输入！"),u()):"AC404"==n.code?(message.warn("您好，该手机号码尚未注册，请先注册再登录。加入CCF，可享受更多会员权益！"),u()):(n.msg?message.warn(n.msg):message.warn("短信发送失败！"),u()),p(t,c))}).fail(function(e,t,n){l(),message.alert("服务器异常！")})}}}function g(e,t){t=t||c,r.setItem(o,t),e.html("重新发送("+t+")"),e.addClass("l_second"),e.unbind();var n=setInterval(function(){t>=1?(t--,e.html("重新发送("+t+")"),t%10==0&&r.setItem(o,t)):p(e,n)},1e3);return n}function p(e,t){l(),r.setItem(o,""),e.removeClass("l_second"),e.html("获取验证码"),clearInterval(t),u(),e.click(function(){f(e)})}d&&d>0&&g(e("#send_sms"),d),t.smsUtils=m}(jQuery,window);